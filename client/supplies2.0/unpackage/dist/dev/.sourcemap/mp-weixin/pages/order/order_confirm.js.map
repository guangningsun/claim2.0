{"version":3,"sources":["uni-app:///main.js","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?e178","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?4ac7","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?56d9","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?5569","uni-app:///pages/order/order_confirm.vue","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?810e","webpack:////Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue?7d81"],"names":["createPage","Page"],"mappings":"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","file":"pages/order/order_confirm.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/order/order_confirm.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./order_confirm.vue?vue&type=template&id=f5c41ab2&\"\nvar renderjs\nimport script from \"./order_confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./order_confirm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./order_confirm.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/victor/HBuilderProjects/supplies2.0/claim2.0/client/supplies2.0/pages/order/order_confirm.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_confirm.vue?vue&type=template&id=f5c41ab2&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_confirm.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view style=\"padding-bottom: 120upx;\">\r\n\t\t<cu-custom bgColor=\"bg-gradual-blue\" :isBack=\"true\">\r\n\t\t\t<block slot=\"content\">提交订单</block>\r\n\t\t</cu-custom>\r\n\t\t\n\t\t<view class=\"cu-card\">\n\t\t\t<view class=\"cu-item\">\n\t\t\t\t<form>\n\t\t\t\t\t<view class=\"cu-form-group \">\n\t\t\t\t\t\t<view class=\"title\">部门</view>\n\t\t\t\t\t\t<text class=\"text-right\">{{apart_name}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"cu-form-group \">\n\t\t\t\t\t\t<view class=\"title\">姓名</view>\n\t\t\t\t\t\t<text class=\"text-right\">{{name}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"cu-form-group \">\n\t\t\t\t\t\t<view class=\"title\">电话</view>\n\t\t\t\t\t\t<text class=\"text-right\">{{tel}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"cu-form-group \">\n\t\t\t\t\t\t<view class=\"title\">超限提示</view>\n\t\t\t\t\t\t<text class=\"text-right\">{{exceed_hint}}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"cu-form-group\">\n\t\t\t\t\t\t<text class=\"title\">超限原因</text>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tplaceholder=\"请填写超限原因\"\n\t\t\t\t\t\t\tname=\"input\"\n\t\t\t\t\t\t\tclass=\"text-right\"\n\t\t\t\t\t\t\tv-model=\"exceed_reason\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"cu-form-group \">\n\t\t\t\t\t\t<view class=\"title\">是否专项申请</view>\n\t\t\t\t\t\t<switch class=\"radius blue\" @change=\"SwitchIsSpeciall\" :class=\"switchIsSpeciall?'checked':''\" :checked=\"switchIsSpeciall?true:false\"></switch>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t</form>\n\t\t\t\t\n\t\t\t\t<view class=\"cu-form-group solid-top\">\n\t\t\t\t\t<text class=\"title\">\n\t\t\t\t\t\t申请依据(线下申请单拍照)\n\t\t\t\t\t</text>\n\t\t\t\t\t<view class=\"action\">\n\t\t\t\t\t\t{{imgList.length}}/1\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"margin-left margin-bottom-sm\">\n\t\t\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\n\t\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @tap=\"ViewImage\" :data-url=\"imgList[index]\">\n\t\t\t\t\t\t\t<image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @tap.stop=\"DelImg\" :data-index=\"index\">\n\t\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"solids\" @tap=\"ChooseImage\" v-if=\"imgList.length<1\">\n\t\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t</view>\n\t\t\n\t\t<view class=\"cu-card\" v-for=\"(item, index) in order_item_list\" :key=\"index\">\n\t\t\t<view class=\"cu-item\" style=\"margin-bottom: -10upx;\">\n\t\t\t\t<view class=\"margin-top margin-left text-light-blue\">{{item.selected_supplier_name}}</view>\n\t\t\t\t<view class=\" cu-list menu-avatar\" style=\"margin-bottom: -10upx;\">\n\t\t\t\t\t<view class=\"cu-item padding-left\" style=\"height: 200upx;\">\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t\tclass=\"cu-avatar xl margin-left-sm\"\n\t\t\t\t\t\t\t:style=\"\n\t\t\t\t\t\t\t\titem.asset_image === null\n\t\t\t\t\t\t\t\t\t? 'background-image:url(../../static/default.png);'\n\t\t\t\t\t\t\t\t\t: 'background-image:url(' +\n\t\t\t\t\t\t\t\t\t  domain +\n\t\t\t\t\t\t\t\t\t  item.asset_image +\n\t\t\t\t\t\t\t\t\t  ');'\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t></view>\n\t\t\t\t\t\t<view class=\"content4\" style=\"width: calc(100% - 220upx);\">\n\t\t\t\t\t\t\t<view class=\"flex justify-between\">\n\t\t\t\t\t\t\t\t<view class=\"title\">{{ item.asset_name }}</view>\n\t\t\t\t\t\t\t\t<view class=\"title text-orange\">￥{{item.total_price}}</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<view class=\"flex\">\n\t\t\t\t\t\t\t\t<view class=\"text-grey text-df flex\">\n\t\t\t\t\t\t\t\t\t\t规格:{{ item.asset_specification }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"text-grey text-df flex\">\n\t\t\t\t\t\t\t\t\t<text class=\"text-cut margin-left-xs\">\n\t\t\t\t\t\t\t\t\t\t| 型号:{{ item.asset_type }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t\t\t\t<view class=\"flex\">\n\t\t\t\t\t\t\t\t<view class=\"text-grey text-df margin-right-sm\">\n\t\t\t\t\t\t\t\t\t品牌: {{ item.asset_band }}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<view class=\"text-grey text-df\">\n\t\t\t\t\t\t\t\t\t| 数量:{{item.number}}\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"box\">\n\t\t\t<view class=\"cu-bar mytabbar foot tabbar bg-white\">\n\t\t\t\t\n\t\t\t\t<!-- <view class=\"flex\">\n\t\t\t\t\t<view class=\"flex-sub bg-grey padding-sm margin-xs radius\">1</view>\n\t\t\t\t\t<view class=\"flex-sub bg-grey padding-sm margin-xs radius\">1</view>\n\t\t\t\t</view> -->\n\t\t\t\t\n\t\t\t\t<view class=\"flex justify-between align-center\">\n\t\t\t\t\t<view class=\"flex\">\n\t\t\t\t\t\t<view class=\"text-df align-center margin\">\n\t\t\t\t\t\t\t部门余额: {{apartment_balance}}元\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"text-df align-center margin\">\n\t\t\t\t\t\t\t本单合计：￥{{totalPrice}}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<view class=\"margin radius\">\n\t\t\t\t\t\t<view class=\"cu-btn bg-light-blue round\" @tap=\"submit\">提交</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\n\t\t\tapartment_balance:'',\n\t\t\tapartment_name:'',\n\t\t\tapartment_id:'',\n\t\t\t\n\t\t\timgList: [],\n\t\t\t\n\t\t\tswitchIsSpeciall:true,\n\t\t\t\n\t\t\torder_item_list:[],\n\t\t\t\n\t\t\texceed_reason:'',\n\t\t\ttel:uni.getStorageSync(getApp().globalData.key_phone_num),\n\t\t\tapart_name:'',\n\t\t\tname:uni.getStorageSync(getApp().globalData.key_user_name),\n\t\t\t\n\t\t\ttotalPrice:0,\n\t\t\tbalance:this.apartment_balance - this.totalPrice,\n\t\t\t\n\t\t\texceed_hint:'无',\n\t\t\tis_exceed:false,\n\t\t\tis_item_price_exceed:false,\n\t\t\t\n\t\t\timgFileList:[],\n\t\t\t\n\t\t\timageFile:null,\r\n\t\t};\r\n\t},\r\n\tonLoad() {\n\t\tthis.order_item_list = getApp().globalData.cart_list_info;\n\t\t\n\t\tvar itemList = this.order_item_list.filter(item => {\n\t\t\treturn item.number > 0;\n\t\t});\n\t\t\n\t\tthis.order_item_list = itemList;\n\t\t\n\t\tconsole.log(this.order_item_list);\n\t\t\n\t\tlet sum = 0;\n\t\tfor (var i = 0; i < this.order_item_list.length; i++) {\n\t\t\tconsole.log(this.order_item_list[i]);\n\t\t\tsum += this.order_item_list[i].total_price;\n\t\t}\n\t\tthis.totalPrice = sum;\r\n\t\tthis.requestBalance();\n\t\t\n\t\t\n\t\tlet exceedItmeList = this.order_item_list.filter(item => {\n\t\t\treturn item.is_exceed;\n\t\t});\n\t\t\n\t\tif(exceedItmeList.length > 0){\n\t\t\tthis.is_exceed = true;\n\t\t\tthis.exceedHint += '单价超限。'\n\t\t\tthis.is_item_price_exceed = true;\n\t\t}\r\n\t},\n\tonHide() {\n\t\t\n\t},\n\tonShow() {\n\n\t},\r\n\tmethods: {\n\t\t\r\n\t\tsuccessCb(rsp) {\n\n\t\t\tif (rsp.data.error === 0) {\n\t\t\t\tconsole.log(rsp.data);\n\t\t\t\tvar aparInfo = rsp.data.msg.budget_info[0];\n\t\t\t\tthis.apartment_balance = aparInfo.surplus;\n\t\t\t\tthis.apart_name = aparInfo.category_name;\n\t\t\t\tthis.apart_id = aparInfo.category;\n\t\t\t\t\n\t\t\t\tthis.balance = this.apartment_balance - this.totalPrice;\n\t\t\t\t\n\t\t\t\tif(this.totalPrice > this.apartment_balance){\n\t\t\t\t\tthis.is_exceed = true;\n\t\t\t\t\tthis.exceedHint = '总价超过部门余额。'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfailCb(err) {\n\t\t\tconsole.log('get_apartment_balance failed', err);\n\t\t},\n\t\tcompleteCb(rsp) {},\n\t\t\n\t\trequestBalance() {\n\t\t\tthis.requestWithMethod(\n\t\t\t\tgetApp().globalData.get_apartment_balance + uni.getStorageSync(getApp().globalData.key_cat),\n\t\t\t\t'GET',\n\t\t\t\t'',\n\t\t\t\tthis.successCb,\n\t\t\t\tthis.failCb,\n\t\t\t\tthis.completeCb\n\t\t\t);\n\t\t},\n\t\t//////////////////////\n\t\t\n\t\tViewImage(e) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: this.imgList,\n\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t});\n\t\t},\n\t\tDelImg(e) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '删除照片',\n\t\t\t\tcontent: '确定要删除这张照片吗？',\n\t\t\t\tcancelText: '否',\n\t\t\t\tconfirmText: '是',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\tthis.imgList.splice(e.currentTarget.dataset.index, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tChooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1, //默认9\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album', 'camera'],\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\n\t\t\t\t\tif (this.imgList.length != 0) {\n\t\t\t\t\t\tthis.imgList = this.imgList.concat(res.tempFilePaths);\n\t\t\t\t\t\tthis.imgFileList = this.imgFileList.concat(res.tempFiles);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.imgList = res.tempFilePaths;\n\t\t\t\t\t\tthis.imgFileList = res.tempFiles;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(this.imgFileList);\n\t\t\t\t\t\n\t\t\t\t\t// var test = document.getElementById('test');\n\t\t\t\t\t// test.addEventListener('change', function() {\n\t\t\t\t\t// \tvar t_files = this.files;\n\t\t\t\t\t// \tvar str = '';\n\t\t\t\t\t// \tfor(var i = 0, len = t_files.length; i < len; i++) {\n\t\t\t\t\t// \t\tconsole.log(t_files[i]);\n\t\t\t\t\t// \t\tstr += '<a href=\"javascript:void(0)\">' + t_files[i].name + '</a><br/>';\n\t\t\t\t\t// \t};\n\t\t\t\t\t// \tdocument.getElementById('content').innerHTML = str;\n\t\t\t\t\t// }, false);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tSwitchIsSpeciall(e) {\n\t\t\tthis.switchIsSpeciall = e.detail.value\n\t\t},\n\t\t\n\t\t//////////\n\t\t\n\t\tsuccessCallback(rsp) {\n\t\t\tconsole.log(rsp);\n\t\t\tif (rsp.data.error === 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'提交成功',\n\t\t\t\t\tsuccess() {\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl:'./order_list'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tgetApp().globalData.cart_list_info = [];\n\t\t\t}\n\t\t},\n\t\tfailCallback(err) {\n\t\t\tuni.hideLoading();\n\t\t\tconsole.log('api_device_opt failed', err);\n\t\t},\n\t\tcompleteCallback(rsp) {},\n\t\t\n\t\tsubmit(){\n\t\t\tif(this.switchIsSpeciall == undefined){\n\t\t\t\tthis.showToast('确定是否为专项申请？');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tlet orderItem = getApp().globalData.cart_list_info;\n\t\t\tconsole.log(orderItem);\n\t\t\t\n\t\t\tif(this.is_item_price_exceed){\n\t\t\t\tif(this.isEmpty(this.exceed_reason) || this.imgList.length == 0){\n\t\t\t\t\tthis.showToast(\"单价超限，请填写超限原因及拍照\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(this.totalPrice > this.apartment_balance){\n\t\t\t\tif(this.isEmpty(this.exceed_reason) || this.imgList.length == 0){\n\t\t\t\t\tthis.showToast(\"总价超过部门余额，请填写超限原因及拍照\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(this.switchIsSpeciall){\n\t\t\t\tif(this.isEmpty(this.exceed_reason) || this.imgList.length == 0){\n\t\t\t\t\tthis.showToast(\"专项申请，请填写超限原因及拍照\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '正在提交订单',\n\t\t\t})\n\t\t\t\n\t\t\t// uni.uploadFile({\n\t\t\t// \turl: getApp().globalData.image_upload_url,\n\t\t\t// \tfilePath: this.imgList[0],\n\t\t\t// \tname: 'file',\n\t\t\t// \tsuccess: (uploadFileRes) => {\n\t\t\t// \t\tconsole.log(\"upload:\");\n\t\t\t// \t\tconsole.log(uploadFileRes.data);\n\t\t\t// \t}\n\t\t\t// });\n\t\t\t\n\t\t\tvar itemList = [];\n\n\t\t\tlet newArr = orderItem.map((item) => {\n\t\t\t\treturn Object.assign({ item_sn: item.asset_sn },\n\t\t\t\t{item_supplier_id:item.selected_supplier},\n\t\t\t\t{item_num:item.number},\n\t\t\t\t{item_price:item.total_price});\n\t\t\t});\n\t\t\titemList = newArr;\n\t\t\n\t\t\tlet params = {\n\t\t\t\tweixin_openid:uni.getStorageSync( getApp().globalData.key_wx_openid),\n\t\t\t\torder_apartment: this.apart_id,\n\t\t\t\torder_exceed_reason: this.exceed_reason,\n\t\t\t\torder_is_special:this.switchIsSpeciall ? 'True' : 'False',\n\t\t\t\torder_item_list:JSON.stringify(itemList),\n\t\t\t\torder_total_price:this.totalPrice,\n\t\t\t\tis_exceed: this.is_exceed ? 'True' : 'False'\n\t\t\t};\n\n\t\t\tlet url = getApp().globalData.domain_port + getApp().globalData.get_submit_order;\n\n\t\t\tif(this.imgList.length > 0){\n\t\t\t\tconsole.log(this.imgList);\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfilePath: this.imgList[0],\n\t\t\t\t\tname: 'order_image',\n\t\t\t\t\tformData: params,\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'multipart/form-data'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\t\tthis.successCallback(uploadFileRes);\n\t\t\t\t\t\tconsole.log('upload success');\n\t\t\t\t\t\tconsole.log(uploadFileRes.statusCode);\n\t\t\t\t\t\tlet data = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\tif (uploadFileRes.statusCode == 200 && data.error == 0) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle:'提交成功',\n\t\t\t\t\t\t\t\tsuccess() {\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\turl:'./order_list'\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tgetApp().globalData.cart_list_info = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (res) => {\n\t\t\t\t\t\tconsole.log(res);\n\t\t\t\t\t\tconsole.log('upload failed');\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\tthis.showToast('提交失败');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tlet params = {\n\t\t\t\t\tweixin_openid:uni.getStorageSync( getApp().globalData.key_wx_openid),\n\t\t\t\t\torder_apartment: this.apart_id,\n\t\t\t\t\torder_exceed_reason: this.exceed_reason,\n\t\t\t\t\torder_is_special:this.switchIsSpeciall ? 'True' : 'False',\n\t\t\t\t\torder_image:'',\n\t\t\t\t\torder_item_list:JSON.stringify(itemList),\n\t\t\t\t\torder_total_price:this.totalPrice,\n\t\t\t\t\tis_exceed: this.is_exceed ? 'True' : 'False'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.requestWithMethod(\n\t\t\t\t\tgetApp().globalData.get_submit_order,\n\t\t\t\t\t\"POST\",\n\t\t\t\t\tparams,\n\t\t\t\t\tthis.successCallback,\n\t\t\t\t\tthis.failCallback,\n\t\t\t\t\tthis.completeCallback);\n\t\t\t}\n\t\t},\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.card-margin {\r\n\tmargin-top: -30upx;\r\n}\n.text-wrapper {\n\twhite-space: pre-wrap;\n}\r\n</style>\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_confirm.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./order_confirm.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1591540949092\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}